(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"9zwk":function(t,e,r){"use strict";r.r(e);var a=r("AN1W"),n={name:"Orders",data:function(){return{orders:[],meta:null,links:{first:null,last:null,next:null,prev:null},error:null}},beforeRouteEnter:function(t,e,r){a.a.all(t.query.page,(function(t,e){r((function(r){return r.setOrders(t,e)}))}))},beforeRouteUpdate:function(t,e,r){var n=this;this.orders=this.links=this.meta=null,a.a.all(t.query.page,(function(t,e){n.setOrders(t,e),r()}))},methods:{costOrder:function(t){return t.map((function(t){return t.price*t.quantity})).reduce((function(t,e){return t+e}),0)},setOrders:function(t,e){var r=e.data,a=e.links,n=e.meta;t?this.error=t.toString():(this.orders=r,this.links=a,this.meta=n)}},components:{PagePaginate:r("zonO").a}},s=r("KHd+"),o=Object(s.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container mx-auto py-6"},[r("h1",{staticClass:"mb-3 text-3xl"},[t._v("Список заказов")]),t._v(" "),r("page-paginate",{attrs:{links:t.links,meta:t.meta}}),t._v(" "),r("table",{staticClass:"shadow-lg w-full table-auto"},[t._m(0),t._v(" "),r("tbody",t._l(t.orders,(function(e){return r("tr",[r("td",{staticClass:"border px-4 py-2"},[r("router-link",{staticClass:"flex hover:bg-gray-100 hover:shadow-outline items-center justify-center",attrs:{to:{name:"order.show",params:{id:e.id,order:e}}}},[t._v(t._s(e.id)+"\n                ")])],1),t._v(" "),r("td",{staticClass:"border px-4 py-2",domProps:{textContent:t._s(e.partner.name)}}),t._v(" "),r("td",{staticClass:"border px-4 py-2",domProps:{textContent:t._s(t.costOrder(e.products)+" руб.")}}),t._v(" "),r("td",{staticClass:"border px-4 py-2"},t._l(e.products,(function(e){return r("div",{domProps:{textContent:t._s(e.name)}})})),0),t._v(" "),r("td",{staticClass:"border px-4 py-2",domProps:{textContent:t._s(t.$root.statuses[e.status])}})])})),0)])],1)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",{staticClass:"bg-gray-200 border px-4 py-4"},[t._v("Заказ №")]),t._v(" "),r("th",{staticClass:"bg-gray-200 border px-4 py-4"},[t._v("Партнер")]),t._v(" "),r("th",{staticClass:"bg-gray-200 border px-4 py-4"},[t._v("Стоимость Заказа")]),t._v(" "),r("th",{staticClass:"bg-gray-200 border px-4 py-4"},[t._v("Состав Заказа")]),t._v(" "),r("th",{staticClass:"bg-gray-200 border px-4 py-4"},[t._v("Статус Заказа")])])])}],!1,null,null,null);e.default=o.exports},AN1W:function(t,e,r){"use strict";function a(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"find",value:function(t,e){return axios.get("/api/orders/"+t).then((function(t){e(null,t.data)})).catch((function(t){e(t,t.response.data)}))}},{key:"all",value:function(t,e){var r={page:t};axios.get("/api/orders",{params:r}).then((function(t){e(null,t.data)})).catch((function(t){e(t,t.response.data)}))}}],(r=null)&&a(e.prototype,r),n&&a(e,n),t}();e.a=n},zonO:function(t,e,r){"use strict";var a={name:"PagePaginate",props:{links:Object,meta:Object},computed:{nextPage:function(){if(this.meta&&this.meta.current_page!==this.meta.last_page)return this.meta.current_page+1},prevPage:function(){if(this.meta&&1!==this.meta.current_page)return this.meta.current_page-1},paginationCount:function(){if(this.meta){var t=this.meta,e=t.current_page,r=t.last_page;return"".concat(e," of ").concat(r)}}}},n=r("KHd+"),s=Object(n.a)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mb-3 flex justify-between items-center"},[r("div",[r("router-link",{staticClass:"bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow",class:t.prevPage?"":"opacity-50 cursor-not-allowed",attrs:{tag:"button",to:{query:{page:t.prevPage}},disabled:!t.prevPage}},[t._v("Previous\n        ")]),t._v(" "),r("router-link",{staticClass:"bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow",class:t.nextPage?"":"opacity-50 cursor-not-allowed",attrs:{tag:"button",to:{query:{page:t.nextPage}},disabled:!t.nextPage}},[t._v("Next\n        ")])],1),t._v(" "),r("div",{staticClass:"font-bold",domProps:{textContent:t._s(t.paginationCount)}})])}),[],!1,null,null,null);e.a=s.exports}}]);